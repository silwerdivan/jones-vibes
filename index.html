<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jones in the Fast Lane</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@500;800&family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <div class="app-shell">
        <header class="hud glass">
            <div class="hud-left">
                <div class="hud-status-orbs">
                    <div id="orb-p1" class="status-orb active">
                        <div id="hud-time-ring-p1" class="time-ring-container"></div>
                        <div class="orb-avatar" id="hud-avatar-p1">P1</div>
                    </div>
                    
                    <div id="orb-p2" class="status-orb inactive">
                        <div id="hud-time-ring-p2" class="time-ring-container"></div>
                        <div class="orb-avatar" id="hud-avatar-p2">AI</div>
                    </div>
                </div>
                <div class="hud-stats">
                    <div class="hud-stat-item">
                        <span class="hud-label">CREDITS</span>
                        <span id="hud-cash" class="hud-value currency">$0</span>
                    </div>
                </div>
            </div>
            
            <div class="hud-right">
                <div id="hud-terminal-trigger" class="hud-terminal-btn" aria-label="Open Intel Terminal">
                    <i class="material-icons">terminal</i>
                    <span id="terminal-badge" class="terminal-badge hidden">0</span>
                </div>
                <div class="hud-stat-item text-right">
                    <span class="hud-label">WEEK</span>
                    <span id="hud-week" class="hud-value">1</span>
                </div>
                <div class="hud-stat-item text-right">
                    <span class="hud-label">ZONE</span>
                    <span id="hud-location" class="hud-value">Home</span>
                </div>
            </div>
        </header>

        <div class="news-ticker glass">
            <div class="ticker-content" id="news-ticker-content">
                Welcome to Jones in the Fast Lane! | Build wealth, education and happiness! | Visit the Employment Agency to find work.
            </div>
        </div>

        <main class="content-area">
            <section id="screen-city" class="screen">
                <div id="city-bento-grid" class="bento-grid">
                    <!-- Bento cards will be dynamically inserted here -->
                </div>
            </section>

            <section id="screen-life" class="screen hidden">
                <div class="life-header card glass">
                    <div class="life-avatar-container">
                        <div class="avatar-sm" id="life-avatar">P1</div>
                    </div>
                    <div class="status-chips" id="status-chips">
                        <!-- Dynamic Chips -->
                    </div>
                </div>
                <div class="gauge-grid">
                    <div class="gauge-card glass" data-gauge="wealth">
                        <div class="gauge-svg-container" id="gauge-wealth"></div>
                        <div class="gauge-label">Wealth</div>
                    </div>
                    <div class="gauge-card glass" data-gauge="happiness">
                        <div class="gauge-svg-container" id="gauge-happiness"></div>
                        <div class="gauge-label">Happiness</div>
                    </div>
                    <div class="gauge-card glass" data-gauge="education">
                        <div class="gauge-svg-container" id="gauge-education"></div>
                        <div class="gauge-label">Education</div>
                    </div>
                    <div class="gauge-card glass" data-gauge="career">
                        <div class="gauge-svg-container" id="gauge-career"></div>
                        <div class="gauge-label">Career</div>
                    </div>
                </div>
            </section>

            <section id="screen-inventory" class="screen hidden">
                <div class="inventory-section">
                    <h3 class="section-title">Essentials</h3>
                    <div id="essentials-grid" class="essentials-grid">
                        <!-- Dynamic Essential Items -->
                    </div>
                </div>
                <div class="inventory-section">
                    <h3 class="section-title">Home Assets</h3>
                    <div id="assets-grid" class="assets-grid">
                        <!-- Dynamic Asset Cards -->
                    </div>
                </div>
            </section>

            <section id="screen-social" class="screen hidden">
                <div class="screen-placeholder card glass">
                    <h2>Social</h2>
                    <p>Coming soon: Connect with other residents.</p>
                </div>
            </section>

            <section id="screen-menu" class="screen hidden">
                <div class="screen-placeholder card glass">
                    <h2>System Menu</h2>
                    <p>Coming soon: Settings and game options.</p>
                </div>
            </section>
        </main>

        <!-- START: Contextual Action Tray -->
        <div id="contextual-action-tray" class="action-tray glass hidden">
            <div class="tray-location-info">
                <div id="tray-icon" class="tray-icon"></div>
                <div class="tray-text">
                    <span class="tray-label">Current Location</span>
                    <span id="tray-location-name" class="tray-value">Employment Agency</span>
                </div>
            </div>
            <div id="tray-actions" class="tray-buttons">
                <!-- Dynamically populated buttons -->
            </div>
        </div>
        <!-- END: Contextual Action Tray -->

        <nav class="tab-bar glass">
            <button class="tab-item active" data-screen="city" aria-label="City">
                <span class="tab-icon" id="icon-city"></span>
                <span class="tab-label">City</span>
            </button>
            <button class="tab-item" data-screen="life" aria-label="Life">
                <span class="tab-icon" id="icon-life"></span>
                <span class="tab-label">Life</span>
            </button>
            <button class="tab-item" data-screen="inventory" aria-label="Inventory">
                <span class="tab-icon" id="icon-inventory"></span>
                <span class="tab-label">Items</span>
            </button>
            <button class="tab-item" data-screen="social" aria-label="Social">
                <span class="tab-icon" id="icon-social"></span>
                <span class="tab-label">Social</span>
            </button>
            <button class="tab-item" data-screen="menu" aria-label="Menu">
                <span class="tab-icon" id="icon-menu"></span>
                <span class="tab-label">Menu</span>
            </button>
        </nav>

        <!-- START: Add the Modal Structure -->
        <div id="choice-modal-overlay" class="hidden">
            <div id="choice-modal">
                <div id="modal-clerk-container" class="clerk-container hidden">
                    <div class="clerk-avatar-wrapper">
                        <div id="modal-clerk-avatar" class="clerk-avatar"></div>
                    </div>
                    <div class="speech-bubble">
                        <div id="modal-clerk-name" class="clerk-name">Clerk</div>
                        <p id="modal-clerk-message" class="clerk-message">Welcome! How can I help you today?</p>
                    </div>
                </div>
                <div class="modal-content">
                    <h2 id="choice-modal-title">Make a Choice</h2>
                    <div id="choice-modal-content">
                        <!-- Content will be dynamically inserted here -->
                    </div>
                    <div id="choice-modal-input" class="hidden">
                        <input type="number" id="modal-input-amount" placeholder="Enter amount">
                    </div>
                </div>
                <div class="buttons">
                    <div id="choice-modal-buttons">
                        <!-- Buttons will be dynamically inserted here -->
                    </div>
                    <button id="modal-cancel-button" class="btn btn-secondary">Cancel</button>
                </div>
            </div>
        </div>
        <!-- END: Add the Modal Structure -->

        <!-- START: Player Stats Modal Structure -->
        <div id="player-stats-modal-overlay" class="hidden">
            <div id="player-stats-modal">
                <div class="player-stats-modal-header">
                    <h2 id="player-stats-modal-title">Player Stats</h2>
                    <button id="player-stats-modal-close" class="btn btn-icon btn-secondary modal-close-btn"><i class="material-icons">close</i></button>
                </div>
                <div class="swipe-indicator">
                    <div class="swipe-bar"></div>
                </div>
                <div class="player-stats-modal-content">
                    <div class="player-stats-grid">
                        <div class="player-stat-item">
                            <span class="player-stat-icon">üí∞</span>
                            <span class="player-stat-label">Cash:</span>
                            <span id="modal-cash" class="player-stat-value">$0</span>
                        </div>
                        <div class="player-stat-item">
                            <span class="player-stat-icon">üè¶</span>
                            <span class="player-stat-label">Savings:</span>
                            <span id="modal-savings" class="player-stat-value">$0</span>
                        </div>
                        <div class="player-stat-item">
                            <span class="player-stat-icon">üí∏</span>
                            <span class="player-stat-label">Loan:</span>
                            <span id="modal-loan" class="player-stat-value">$0</span>
                        </div>
                        <div class="player-stat-item">
                            <span class="player-stat-icon">üòä</span>
                            <span class="player-stat-label">Happiness:</span>
                            <span id="modal-happiness" class="player-stat-value">0</span>
                        </div>
                        <div class="player-stat-item">
                            <span class="player-stat-icon">üéì</span>
                            <span class="player-stat-label">Education:</span>
                            <span id="modal-education" class="player-stat-value">None</span>
                        </div>
                        <div class="player-stat-item">
                            <span class="player-stat-icon">üíº</span>
                            <span class="player-stat-label">Career:</span>
                            <span id="modal-career" class="player-stat-value">Unemployed</span>
                        </div>
                        <div class="player-stat-item">
                            <span class="player-stat-icon">üöó</span>
                            <span class="player-stat-label">Car:</span>
                            <span id="modal-car" class="player-stat-value">No</span>
                        </div>
                        <div class="player-stat-item">
                            <span class="player-stat-icon">‚è∞</span>
                            <span class="player-stat-label">Time Remaining:</span>
                            <span id="modal-time" class="player-stat-value">0 hours</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END: Player Stats Modal Structure -->

        <!-- START: Intel Terminal Structure -->
        <div id="intel-terminal-overlay" class="hidden">
            <div id="intel-terminal" class="terminal-window">
                <div class="scanlines"></div>
                <div class="terminal-header">
                    <div class="terminal-title"><i class="material-icons">terminal</i> INTEL_FEED_v4.2</div>
                    <button id="intel-terminal-close" class="btn btn-icon btn-secondary terminal-close-btn"><i class="material-icons">close</i></button>
                </div>
                <div class="terminal-content">
                    <div id="terminal-entries" class="terminal-text"></div>
                </div>
            </div>
        </div>
        <!-- END: Intel Terminal Structure -->

        <!-- START: Loading Overlay -->
        <div id="loading-overlay" class="hidden">
          <div class="spinner"></div>
          <p class="loading-text">AI is thinking...</p>
        </div>
        <!-- END: Loading Overlay -->

        <!-- START: Floating Action Button -->
        <button id="fab-next-week" class="fab-next-week hidden" aria-label="Next Week">
            <i class="material-icons">fast_forward</i>
            <span class="fab-label">Next Week</span>
        </button>
        <!-- END: Floating Action Button -->

    </div>

    <script type="module" src="js/app.js"></script>
</body>
</html>