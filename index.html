<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jones in the Fast Lane</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@500;800&family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <div class="app-shell">
        <header class="hud glass">
            <div class="hud-left">
                <div class="player-avatar-wrapper">
                    <div id="hud-time-ring" class="time-ring-container"></div>
                    <div class="avatar-placeholder" id="hud-avatar">
                        <span id="avatar-initials">P1</span>
                    </div>
                </div>
                <div class="hud-stats">
                    <div class="hud-stat-item">
                        <span class="hud-label">CREDITS</span>
                        <span id="hud-cash" class="hud-value currency">$0</span>
                    </div>
                </div>
            </div>
            
            <div class="hud-right">
                <div class="hud-stat-item text-right">
                    <span class="hud-label">WEEK</span>
                    <span id="hud-week" class="hud-value">1</span>
                </div>
                <div class="hud-stat-item text-right">
                    <span class="hud-label">ZONE</span>
                    <span id="hud-location" class="hud-value">Home</span>
                </div>
            </div>
        </header>

        <div class="news-ticker glass">
            <div class="ticker-content" id="news-ticker-content">
                Welcome to Jones in the Fast Lane! | Build wealth, education and happiness! | Visit the Employment Agency to find work.
            </div>
        </div>

        <main class="content-area">
            <!-- Mobile stats bar - only visible on small screens -->
            <div id="mobile-stats" class="mobile-stats" aria-label="Player Statistics">
                <div class="mobile-stat-card card" id="mobile-stat-p1">
                    <div class="mobile-stat-header">
                        <span class="mobile-player-name">You</span>
                        <span class="mobile-player-indicator" id="mobile-p1-active"></span>
                    </div>
                    <div class="mobile-stat-grid">
                        <span class="mobile-stat-icon">üí∞</span>
                        <span id="mobile-p1-cash" class="mobile-stat-value">$0</span>
                        <span class="mobile-stat-icon">üè¶</span>
                        <span id="mobile-p1-savings" class="mobile-stat-value">$0</span>
                        <span class="mobile-stat-icon">üí∏</span>
                        <span id="mobile-p1-loan" class="mobile-stat-value">$0</span>
                        <span class="mobile-stat-icon">üòä</span>
                        <span id="mobile-p1-happiness" class="mobile-stat-value">0</span>
                        <span class="mobile-stat-icon">‚è∞</span>
                        <span id="mobile-p1-time" class="mobile-stat-value">24h</span>
                    </div>
                </div>
                <div class="mobile-stat-card card" id="mobile-stat-p2">
                    <div class="mobile-stat-header">
                        <span class="mobile-player-name">AI</span>
                        <span class="mobile-player-indicator" id="mobile-p2-active"></span>
                    </div>
                    <div class="mobile-stat-grid">
                        <span class="mobile-stat-icon">üí∞</span>
                        <span id="mobile-p2-cash" class="mobile-stat-value">$0</span>
                        <span class="mobile-stat-icon">üè¶</span>
                        <span id="mobile-p2-savings" class="mobile-stat-value">$0</span>
                        <span id="mobile-p2-loan" class="mobile-stat-value">$0</span>
                        <span class="mobile-stat-icon">üòä</span>
                        <span id="mobile-p2-happiness" class="mobile-stat-value">0</span>
                        <span id="mobile-p2-time" class="mobile-stat-value">24h</span>
                    </div>
                </div>
            </div>

            <div id="player-1" class="player-panel card glass">
                <h2>You</h2>
                <div class="stats">
                    <div class="stat-item">
                        <span class="stat-icon">üí∞</span>
                        <div class="stat-details">
                            <span class="stat-label">Cash</span>
                            <span id="p1-cash" class="stat-value currency">$0</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üè¶</span>
                        <div class="stat-details">
                            <span class="stat-label">Savings</span>
                            <span id="p1-savings" class="stat-value">$0</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üí∏</span>
                        <div class="stat-details">
                            <span class="stat-label">Loan</span>
                            <span id="p1-loan" class="stat-value">$0</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üòä</span>
                        <div class="stat-details">
                            <span class="stat-label">Happiness</span>
                            <span id="p1-happiness" class="stat-value">0</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üéì</span>
                        <div class="stat-details">
                            <span class="stat-label">Education</span>
                            <span id="p1-education" class="stat-value">None</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üíº</span>
                        <div class="stat-details">
                            <span class="stat-label">Career</span>
                            <span id="p1-career" class="stat-value">Unemployed</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üöó</span>
                        <div class="stat-details">
                            <span class="stat-label">Car</span>
                            <span id="p1-car" class="stat-value">No</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">‚è∞</span>
                        <div class="stat-details">
                            <span class="stat-label">Time</span>
                            <span id="p1-time" class="stat-value">24h</span>
                        </div>
                    </div>
                </div>
            </div>

            <div id="player-2" class="player-panel card glass">
                <h2>AI</h2>
                <div class="stats">
                    <div class="stat-item">
                        <span class="stat-icon">üí∞</span>
                        <div class="stat-details">
                            <span class="stat-label">Cash</span>
                            <span id="p2-cash" class="stat-value currency">$0</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üè¶</span>
                        <div class="stat-details">
                            <span class="stat-label">Savings</span>
                            <span id="p2-savings" class="stat-value">$0</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üí∏</span>
                        <div class="stat-details">
                            <span class="stat-label">Loan</span>
                            <span id="p2-loan" class="stat-value">$0</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üòä</span>
                        <div class="stat-details">
                            <span class="stat-label">Happiness</span>
                            <span id="p2-happiness" class="stat-value">0</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üéì</span>
                        <div class="stat-details">
                            <span class="stat-label">Education</span>
                            <span id="p2-education" class="stat-value">None</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üíº</span>
                        <div class="stat-details">
                            <span class="stat-label">Career</span>
                            <span id="p2-career" class="stat-value">Unemployed</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üöó</span>
                        <div class="stat-details">
                            <span class="stat-label">Car</span>
                            <span id="p2-car" class="stat-value">No</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">‚è∞</span>
                        <div class="stat-details">
                            <span class="stat-label">Time</span>
                            <span id="p2-time" class="stat-value">24h</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="event-log card glass" data-testid="game-log">
                <div class="log-header">
                    <h3>Game Log</h3>
                    <button id="log-toggle-btn" class="btn btn-icon" aria-label="Toggle game log">
                        <span class="log-toggle-icon"><i class="material-icons">arrow_drop_down</i></span>
                    </button>
                </div>
                <div class="log-content"></div>
            </div>

            <div id="location-info" class="location-hint-area">
                <div class="location-hint" id="location-hint">3 actions available here</div>
            </div>
        </main>

        <nav class="bottom-nav glass">
            <div id="game-controls" class="action-bar">
                <div class="action-buttons">
                    <button class="btn btn-primary" data-action="restEndTurn"><span class="btn-icon"><i class="material-icons">bedtime</i></span> <span class="btn-text">Rest / End Turn</span></button>
                    <button class="btn btn-secondary location-specific hidden" data-action="travel"><span class="btn-icon"><i class="material-icons">directions_car</i></span> <span class="btn-text">Travel</span></button>
                    <button class="btn btn-secondary location-specific hidden" data-action="workShift"><span class="btn-icon"><i class="material-icons">work</i></span> <span class="btn-text">Work Shift</span></button>
                    <button class="btn btn-secondary location-specific hidden" data-action="applyForJob"><span class="btn-icon"><i class="material-icons">description</i></span> <span class="btn-text">Apply for Job</span></button>
                    <button class="btn btn-secondary location-specific hidden" data-action="takeCourse"><span class="btn-icon"><i class="material-icons">school</i></span> <span class="btn-text">Take Course</span></button>
                    <button class="btn btn-secondary location-specific hidden" data-action="buyItem"><span class="btn-icon"><i class="material-icons">shopping_bag</i></span> <span class="btn-text">Buy Item</span></button>
                    <button class="btn btn-secondary location-specific hidden" data-action="deposit"><span class="btn-icon"><i class="material-icons">account_balance</i></span> <span class="btn-text">Deposit</span></button>
                    <button class="btn btn-secondary location-specific hidden" data-action="withdraw"><span class="btn-icon"><i class="material-icons">money_off</i></span> <span class="btn-text">Withdraw</span></button>
                    <button class="btn btn-secondary location-specific hidden" data-action="takeLoan"><span class="btn-icon"><i class="material-icons">trending_up</i></span> <span class="btn-text">Take Loan</span></button>
                    <button class="btn btn-secondary location-specific hidden" data-action="repayLoan"><span class="btn-icon"><i class="material-icons">trending_down</i></span> <span class="btn-text">Repay Loan</span></button>
                    <button class="btn btn-secondary location-specific hidden" data-action="buyCar"><span class="btn-icon"><i class="material-icons">directions_car</i></span> <span class="btn-text">Buy Car</span></button>
                </div>
            </div>
        </nav>

        <!-- START: Add the Modal Structure -->
        <div id="choice-modal-overlay" class="hidden">
            <div id="choice-modal">
                <div class="modal-content">
                    <h2 id="choice-modal-title">Make a Choice</h2>
                    <div id="choice-modal-content">
                        <!-- Content will be dynamically inserted here -->
                    </div>
                    <div id="choice-modal-input" class="hidden">
                        <input type="number" id="modal-input-amount" placeholder="Enter amount">
                    </div>
                </div>
                <div class="buttons">
                    <div id="choice-modal-buttons">
                        <!-- Buttons will be dynamically inserted here -->
                    </div>
                    <button id="modal-cancel-button" class="btn btn-secondary">Cancel</button>
                </div>
            </div>
        </div>
        <!-- END: Add the Modal Structure -->

        <!-- START: Player Stats Modal Structure -->
        <div id="player-stats-modal-overlay" class="hidden">
            <div id="player-stats-modal">
                <div class="player-stats-modal-header">
                    <h2 id="player-stats-modal-title">Player Stats</h2>
                    <button id="player-stats-modal-close" class="btn btn-icon btn-secondary modal-close-btn"><i class="material-icons">close</i></button>
                </div>
                <div class="swipe-indicator">
                    <div class="swipe-bar"></div>
                </div>
                <div class="player-stats-modal-content">
                    <div class="player-stats-grid">
                        <div class="player-stat-item">
                            <span class="player-stat-icon">üí∞</span>
                            <span class="player-stat-label">Cash:</span>
                            <span id="modal-cash" class="player-stat-value">$0</span>
                        </div>
                        <div class="player-stat-item">
                            <span class="player-stat-icon">üè¶</span>
                            <span class="player-stat-label">Savings:</span>
                            <span id="modal-savings" class="player-stat-value">$0</span>
                        </div>
                        <div class="player-stat-item">
                            <span class="player-stat-icon">üí∏</span>
                            <span class="player-stat-label">Loan:</span>
                            <span id="modal-loan" class="player-stat-value">$0</span>
                        </div>
                        <div class="player-stat-item">
                            <span class="player-stat-icon">üòä</span>
                            <span class="player-stat-label">Happiness:</span>
                            <span id="modal-happiness" class="player-stat-value">0</span>
                        </div>
                        <div class="player-stat-item">
                            <span class="player-stat-icon">üéì</span>
                            <span class="player-stat-label">Education:</span>
                            <span id="modal-education" class="player-stat-value">None</span>
                        </div>
                        <div class="player-stat-item">
                            <span class="player-stat-icon">üíº</span>
                            <span class="player-stat-label">Career:</span>
                            <span id="modal-career" class="player-stat-value">Unemployed</span>
                        </div>
                        <div class="player-stat-item">
                            <span class="player-stat-icon">üöó</span>
                            <span class="player-stat-label">Car:</span>
                            <span id="modal-car" class="player-stat-value">No</span>
                        </div>
                        <div class="player-stat-item">
                            <span class="player-stat-icon">‚è∞</span>
                            <span class="player-stat-label">Time Remaining:</span>
                            <span id="modal-time" class="player-stat-value">0 hours</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END: Player Stats Modal Structure -->

        <!-- START: Game Log Modal Structure -->
        <div id="game-log-modal-overlay" class="hidden">
            <div id="game-log-modal">
                <div class="game-log-modal-header">
                    <h2>Game Log</h2>
                    <button id="game-log-modal-close" class="btn btn-icon btn-secondary modal-close-btn"><i class="material-icons">close</i></button>
                </div>
                <div class="swipe-indicator">
                    <div class="swipe-bar"></div>
                </div>
                <div class="game-log-modal-content">
                    <div id="game-log-modal-entries"></div>
                </div>
            </div>
        </div>
        <!-- END: Game Log Modal Structure -->

        <!-- START: Loading Overlay -->
        <div id="loading-overlay" class="hidden">
          <div class="spinner"></div>
          <p class="loading-text">AI is thinking...</p>
        </div>
        <!-- END: Loading Overlay -->

    </div>

    <script type="module" src="js/app.js"></script>
</body>
</html>